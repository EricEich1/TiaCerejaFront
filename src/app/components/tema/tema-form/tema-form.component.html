<div class="tema-form-container fade-in">
  <div class="tema-form-header">
    <div>
      <h1 class="tema-form-title">
        <i class="fas fa-palette"></i>
        {{ isEdit ? 'Editar Tema' : 'Novo Tema' }}
      </h1>
      <p class="tema-form-subtitle">
        {{ isEdit ? 'Atualize as informações do tema' : 'Preencha os dados do novo tema' }}
      </p>
    </div>
  </div>

  <div class="tema-form-content">
    <form (ngSubmit)="salvar()" #temaForm="ngForm">
      <div class="row">
        <div class="col-md-8">
          <div class="form-group">
            <label for="nome" class="form-label">
              <i class="fas fa-tag me-2"></i>
              Nome do Tema *
            </label>
            <input
              type="text"
              id="nome"
              class="form-control"
              [(ngModel)]="tema.nome"
              name="nome"
              placeholder="Ex: Festa de Aniversário"
              required
            >
          </div>
        </div>
        
        <div class="col-md-4">
          <div class="form-group">
            <label for="precoBase" class="form-label">
              <i class="fas fa-dollar-sign me-2"></i>
              Preço Base
            </label>
            <input
              type="number"
              id="precoBase"
              class="form-control"
              [(ngModel)]="tema.precoBase"
              name="precoBase"
              placeholder="0.00"
              step="0.01"
              min="0"
            >
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="descricao" class="form-label">
          <i class="fas fa-align-left me-2"></i>
          Descrição
        </label>
        <textarea
          id="descricao"
          class="form-control"
          [(ngModel)]="tema.descricao"
          name="descricao"
          placeholder="Descreva o tema..."
          rows="3"
        ></textarea>
      </div>

      <div class="row">
        <div class="col-md-6">
          <div class="form-group">
            <label for="corPrincipal" class="form-label">
              <i class="fas fa-paint-brush me-2"></i>
              Cor Principal *
            </label>
            <div class="color-input-wrapper">
              <input
                type="color"
                id="corPrincipal"
                class="color-picker"
                [(ngModel)]="tema.corPrincipal"
                name="corPrincipal"
                required
                (input)="onColorChange()"
              >
              <div class="color-display">
                <div class="color-preview" [style.background-color]="tema.corPrincipal"></div>
                <input
                  type="text"
                  class="color-input"
                  [(ngModel)]="tema.corPrincipal"
                  placeholder="#667eea"
                  name="corPrincipalText"
                >
              </div>
            </div>
          </div>
        </div>
        
        <div class="col-md-6">
          <div class="form-group">
            <label for="corSecundaria" class="form-label">
              <i class="fas fa-paint-brush me-2"></i>
              Cor Secundária
            </label>
            <div class="color-input-wrapper">
              <input
                type="color"
                id="corSecundaria"
                class="color-picker"
                [(ngModel)]="tema.corSecundaria"
                name="corSecundaria"
                (input)="onColorChange()"
              >
              <div class="color-display">
                <div class="color-preview" [style.background-color]="tema.corSecundaria || tema.corPrincipal || '#764ba2'"></div>
                <input
                  type="text"
                  class="color-input"
                  [(ngModel)]="tema.corSecundaria"
                  placeholder="#764ba2 (opcional)"
                  name="corSecundariaText"
                >
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Preview do Tema -->
      <div class="preview-section">
        <label class="form-label">
          <i class="fas fa-eye me-2"></i>
          Preview do Tema
        </label>
        <div class="theme-preview" [style.background]="'linear-gradient(135deg, ' + tema.corPrincipal + ' 0%, ' + (tema.corSecundaria || tema.corPrincipal) + ' 100%)'">
          <div class="preview-content">
            <i class="fas fa-palette preview-icon-large"></i>
            <h3 class="preview-name">{{ tema.nome || 'Nome do Tema' }}</h3>
            <p class="preview-desc" *ngIf="tema.descricao">{{ tema.descricao }}</p>
            <p class="preview-desc-placeholder" *ngIf="!tema.descricao">Descrição do tema aparecerá aqui</p>
          </div>
        </div>
      </div>

      <div class="form-group">
        <div class="form-check">
          <input
            type="checkbox"
            id="ativo"
            class="form-check-input"
            [(ngModel)]="tema.ativo"
            name="ativo"
          >
          <label for="ativo" class="form-check-label">
            <i class="fas fa-check-circle me-2"></i>
            Tema ativo
          </label>
        </div>
      </div>

      <div class="form-actions">
        <button
          type="button"
          class="btn btn-secondary"
          (click)="cancelar()"
          [disabled]="loading"
        >
          <i class="fas fa-times me-2"></i>
          Cancelar
        </button>
        
        <button
          type="submit"
          class="btn btn-primary"
          [disabled]="loading || temaForm.invalid"
        >
          <span *ngIf="loading" class="spinner-border spinner-border-sm me-2" role="status">
            <span class="visually-hidden">Carregando...</span>
          </span>
          <i *ngIf="!loading" class="fas fa-save me-2"></i>
          {{ loading ? 'Salvando...' : (isEdit ? 'Atualizar' : 'Salvar') }}
        </button>
      </div>
    </form>
  </div>
</div>

